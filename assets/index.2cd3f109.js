var K=Object.defineProperty;var Q=(s,e,t)=>e in s?K(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var r=(s,e,t)=>(Q(s,typeof e!="symbol"?e+"":e,t),t);import{c as Z,R as a,a as J,L as C,_ as M,b as _,p as k,t as V,f as P,r as F,m as T,d as U,u as ee,e as te}from"./vendor.6cb322f1.js";const re=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(o){if(o.ep)return;o.ep=!0;const n=t(o);fetch(o.href,n)}};re();const X=Z(),ie=({history:s,children:e})=>{const[t,i]=a.useState({action:s.action,location:s.location});return a.useLayoutEffect(()=>{s.listen(i)},[s]),a.createElement(J,Object.assign({children:e,navigator:s},t))};const oe="_Home_1ijc8_1",se="_list_1ijc8_6",ae="_card_1ijc8_11",ne="_footer_1ijc8_14";var A={home:oe,list:se,card:ae,footer:ne},v="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/pages/Home.tsx";const y=[];for(let s=0;s<5;s++)y.push({title:`part ${s+1}`,description:"Ant Design, a design language for background applications, is refined by Ant UED Team."});y[0].description="\u57FA\u7840\u521B\u5EFA\u6D41\u7A0B\u548C\u57FA\u7840\u56FE\u5F62\u4E09\u89D2\u5F62\u57FA\u7840";y[1].description="\u7BA1\u9053\u548CMSAA";y[2].description="\u6700\u5BB9\u6613\u7406\u89E3\u7684\u57FA\u7840\u4E09\u89D2\u5F62";y[3].description="\u65CB\u8F6C\u7684\u7ACB\u65B9\u4F53";y[4].description="\u4E24\u4E2A\u65CB\u8F6C\u7684\u7ACB\u65B9\u4F53";const ce=()=>{const s=e=>{X.push("/part"+e)};return a.createElement("div",{className:A.home,__self:globalThis,__source:{fileName:v,lineNumber:34,columnNumber:10}},a.createElement(C,{className:A.list,itemLayout:"vertical",size:"large",dataSource:y,footer:a.createElement("div",{className:A.footer,__self:globalThis,__source:{fileName:v,lineNumber:41,columnNumber:9}},a.createElement("a",{href:"https://blog.indeex.club",__self:globalThis,__source:{fileName:v,lineNumber:42,columnNumber:11}},a.createElement("b",{__self:globalThis,__source:{fileName:v,lineNumber:42,columnNumber:46}},"indeex"))," \xA9copyright 2022"),renderItem:(e,t)=>a.createElement(C.Item,{key:e.title,extra:a.createElement("img",{width:172,alt:"logo",src:"https://gw.alipayobjects.com/zos/rmsportal/mqaQswcyDLcXyDKnZfES.png",__self:globalThis,__source:{fileName:v,lineNumber:49,columnNumber:13}}),onClick:i=>s(t+1),className:A.card,__self:globalThis,__source:{fileName:v,lineNumber:46,columnNumber:9}},a.createElement(C.Item.Meta,{title:a.createElement("a",{href:e.href,__self:globalThis,__source:{fileName:v,lineNumber:59,columnNumber:20}},e.title),description:e.description,__self:globalThis,__source:{fileName:v,lineNumber:58,columnNumber:11}}),e.content),__self:globalThis,__source:{fileName:v,lineNumber:35,columnNumber:5}}))};var R="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/pages/About.tsx";const ue=()=>a.createElement("div",{__self:globalThis,__source:{fileName:R,lineNumber:2,columnNumber:12}},a.createElement("button",{__self:globalThis,__source:{fileName:R,lineNumber:3,columnNumber:7}},"\u5173\u4E8E\u8DF3\u8F6C"));var le="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/pages/NotFound.tsx";const de=()=>a.createElement("div",{__self:globalThis,__source:{fileName:le,lineNumber:2,columnNumber:12}},"not found 404 page"),me="_part_pfhqm_1",fe="_card_pfhqm_1",he="_footer_pfhqm_4";var pe={part:me,card:fe,footer:he},_e=`struct VSOut {
    [[builtin(position)]] Position: vec4<f32>;
    [[location(0)]] color: vec3<f32>;
};

[[stage(vertex)]]
fn main([[location(0)]] inPos: vec3<f32>,
        [[location(1)]] inColor: vec3<f32>) -> VSOut {
    var vsOut: VSOut;
    vsOut.Position = vec4<f32>(inPos, 1.0);
    vsOut.color = inColor;
    return vsOut;
}`,ge=`[[stage(fragment)]]
fn main([[location(0)]] inColor: vec3<f32>) -> [[location(0)]] vec4<f32> {
    return vec4<f32>(inColor, 1.0);
}`;const xe=new Float32Array([1,-1,0,-1,-1,0,0,1,0]),ve=new Float32Array([1,0,0,0,1,0,0,0,1]),be=new Uint16Array([0,1,2]);class we{constructor(e){r(this,"canvas");r(this,"adapter");r(this,"device");r(this,"queue");r(this,"context");r(this,"colorTexture");r(this,"colorTextureView");r(this,"depthTexture");r(this,"depthTextureView");r(this,"positionBuffer");r(this,"colorBuffer");r(this,"indexBuffer");r(this,"vertModule");r(this,"fragModule");r(this,"pipeline");r(this,"commandEncoder");r(this,"passEncoder");r(this,"render",()=>{var e,t;this.colorTexture=(e=this.context)==null?void 0:e.getCurrentTexture(),this.colorTextureView=(t=this.colorTexture)==null?void 0:t.createView(),this.encodeCommands(),requestAnimationFrame(this.render)});this.canvas=e}async start(){await this.initializeAPI()&&(this.resizeBackings(),await this.initializeResources(),this.render())}async initializeAPI(){var e;try{const t=navigator.gpu;if(!t)return console.log("not support!"),!1;this.adapter=await t.requestAdapter(),this.device=await this.adapter.requestDevice(),this.queue=(e=this.device)==null?void 0:e.queue}catch(t){return console.error(t),!1}return!0}async initializeResources(){var b,w,$,B;const e=(N,D)=>{let q={size:N.byteLength+3&-4,usage:D,mappedAtCreation:!0},x=this.device.createBuffer(q);return(N instanceof Uint16Array?new Uint16Array(x.getMappedRange()):new Float32Array(x.getMappedRange())).set(N),x.unmap(),x};this.positionBuffer=e(xe,GPUBufferUsage.VERTEX),this.colorBuffer=e(ve,GPUBufferUsage.VERTEX),this.indexBuffer=e(be,GPUBufferUsage.INDEX);const t={code:_e};this.vertModule=(b=this.device)==null?void 0:b.createShaderModule(t);const i={code:ge};this.fragModule=(w=this.device)==null?void 0:w.createShaderModule(i);const o={shaderLocation:0,offset:0,format:"float32x3"},n={shaderLocation:1,offset:0,format:"float32x3"},c={attributes:[o],arrayStride:4*3,stepMode:"vertex"},u={attributes:[n],arrayStride:4*3,stepMode:"vertex"},m={depthWriteEnabled:!0,depthCompare:"less",format:"depth24plus-stencil8"},p={bindGroupLayouts:[]},f=($=this.device)==null?void 0:$.createPipelineLayout(p),l={module:this.vertModule,entryPoint:"main",buffers:[c,u]},h={format:"bgra8unorm"},d={module:this.fragModule,entryPoint:"main",targets:[h]},E={layout:f,vertex:l,fragment:d,primitive:{frontFace:"cw",cullMode:"none",topology:"triangle-list"},depthStencil:m};this.pipeline=(B=this.device)==null?void 0:B.createRenderPipeline(E)}resizeBackings(){var t,i,o;if(!this.context){this.context=this.canvas.getContext("webgpu");const n={device:this.device,format:"bgra8unorm",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC};(t=this.context)==null||t.configure(n)}const e={size:[this.canvas.width,this.canvas.height,1],dimension:"2d",format:"depth24plus-stencil8",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC};this.depthTexture=(i=this.device)==null?void 0:i.createTexture(e),this.depthTextureView=(o=this.depthTexture)==null?void 0:o.createView()}encodeCommands(){var o,n,c,u,m,p,f,l,h,d,g;let e={view:this.colorTextureView,loadValue:{r:0,g:0,b:0,a:1},storeOp:"store"};const t={view:this.depthTextureView,depthLoadValue:1,depthStoreOp:"store",stencilLoadValue:"load",stencilStoreOp:"store"},i={colorAttachments:[e],depthStencilAttachment:t};this.commandEncoder=(o=this.device)==null?void 0:o.createCommandEncoder(),this.passEncoder=(n=this.commandEncoder)==null?void 0:n.beginRenderPass(i),(c=this.passEncoder)==null||c.setPipeline(this.pipeline),(u=this.passEncoder)==null||u.setViewport(0,0,this.canvas.width,this.canvas.height,0,1),(m=this.passEncoder)==null||m.setScissorRect(0,0,this.canvas.width,this.canvas.height),(p=this.passEncoder)==null||p.setVertexBuffer(0,this.positionBuffer),(f=this.passEncoder)==null||f.setVertexBuffer(1,this.colorBuffer),(l=this.passEncoder)==null||l.setIndexBuffer(this.indexBuffer,"uint16"),(h=this.passEncoder)==null||h.drawIndexed(3,1),(d=this.passEncoder)==null||d.endPass(),(g=this.queue)==null||g.submit([this.commandEncoder.finish()])}}var j="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part1/index.tsx";const Ne=()=>(M.exports.useEffect(()=>{const s=document.getElementById("gfx");s.width=document.body.clientWidth,s.height=document.body.clientHeight,new we(s).start()}),a.createElement("div",{className:pe.part,__self:globalThis,__source:{fileName:j,lineNumber:13,columnNumber:10}},a.createElement("canvas",{id:"gfx",__self:globalThis,__source:{fileName:j,lineNumber:14,columnNumber:5}}))),Pe="_part_pfhqm_1",ye="_card_pfhqm_1",Ee="_footer_pfhqm_4";var $e={part:Pe,card:ye,footer:Ee},Be=`@stage(vertex)
fn main(@builtin(vertex_index) VertexIndex : u32)
     -> @builtin(position) vec4<f32> {
  var pos = array<vec2<f32>, 3>(
      vec2<f32>(0.0, 0.5),
      vec2<f32>(-0.5, -0.5),
      vec2<f32>(0.5, -0.5));

  return vec4<f32>(pos[VertexIndex], 0.0, 1.0);
}`,Te=`@stage(fragment)
fn main() -> @location(0) vec4<f32> {
  return vec4<f32>(0.0, 1.0, 0.0, 1.0);
}`;const Me=new Float32Array([1,-1,0,-1,-1,0,0,1,0]),Ue=new Float32Array([1,0,0,0,1,0,0,0,1]),Ae=new Uint16Array([0,1,2]);class Ve{constructor(e){r(this,"canvas");r(this,"adapter");r(this,"device");r(this,"queue");r(this,"context");r(this,"colorTexture");r(this,"colorTextureView");r(this,"depthTexture");r(this,"depthTextureView");r(this,"positionBuffer");r(this,"colorBuffer");r(this,"indexBuffer");r(this,"vertModule");r(this,"fragModule");r(this,"pipeline");r(this,"commandEncoder");r(this,"passEncoder");r(this,"tempCW",0);r(this,"tempCH",0);r(this,"render",()=>{var e,t;this.depthTexture&&this.tempCW!=this.canvas.width&&this.tempCH!=this.canvas.height&&(this.depthTexture.destroy(),this.start()),this.colorTexture=(e=this.context)==null?void 0:e.getCurrentTexture(),this.colorTextureView=(t=this.colorTexture)==null?void 0:t.createView(),this.encodeCommands(),requestAnimationFrame(this.render)});this.canvas=e,this.tempCW=this.canvas.width,this.tempCH=this.canvas.height}async start(){await this.initializeAPI()&&(this.resizeBackings(),await this.initializeResources(),this.render())}async initializeAPI(){var e;try{const t=navigator.gpu;if(!t)return console.log("not support!"),!1;this.adapter=await t.requestAdapter(),this.device=await this.adapter.requestDevice(),this.queue=(e=this.device)==null?void 0:e.queue}catch(t){return console.error(t),!1}return!0}async initializeResources(){var b,w,$,B;const e=(N,D)=>{let q={size:N.byteLength+3&-4,usage:D,mappedAtCreation:!0},x=this.device.createBuffer(q);return(N instanceof Uint16Array?new Uint16Array(x.getMappedRange()):new Float32Array(x.getMappedRange())).set(N),x.unmap(),x};this.positionBuffer=e(Me,GPUBufferUsage.VERTEX),this.colorBuffer=e(Ue,GPUBufferUsage.VERTEX),this.indexBuffer=e(Ae,GPUBufferUsage.INDEX);const t={code:Be};this.vertModule=(b=this.device)==null?void 0:b.createShaderModule(t);const i={code:Te};this.fragModule=(w=this.device)==null?void 0:w.createShaderModule(i);const o={shaderLocation:0,offset:0,format:"float32x3"},n={shaderLocation:1,offset:0,format:"float32x3"},c={attributes:[o],arrayStride:4*3,stepMode:"vertex"},u={attributes:[n],arrayStride:4*3,stepMode:"vertex"},m={depthWriteEnabled:!0,depthCompare:"less",format:"depth24plus-stencil8"},p={bindGroupLayouts:[]},f=($=this.device)==null?void 0:$.createPipelineLayout(p),l={module:this.vertModule,entryPoint:"main",buffers:[c,u]},h={format:"bgra8unorm"},d={module:this.fragModule,entryPoint:"main",targets:[h]},E={layout:f,vertex:l,fragment:d,primitive:{frontFace:"cw",cullMode:"none",topology:"triangle-list"},depthStencil:m};this.pipeline=(B=this.device)==null?void 0:B.createRenderPipeline(E)}resizeBackings(){var t,i,o;if(!this.context){this.context=this.canvas.getContext("webgpu");const n={device:this.device,format:"bgra8unorm",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC};(t=this.context)==null||t.configure(n)}const e={size:[this.canvas.width,this.canvas.height,1],dimension:"2d",format:"depth24plus-stencil8",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC};this.depthTexture=(i=this.device)==null?void 0:i.createTexture(e),this.depthTextureView=(o=this.depthTexture)==null?void 0:o.createView()}encodeCommands(){var o,n,c,u,m,p,f,l,h,d,g;let e={view:this.colorTextureView,loadValue:{r:0,g:0,b:0,a:1},storeOp:"store"};const t={view:this.depthTextureView,depthLoadValue:1,depthStoreOp:"store",stencilLoadValue:"load",stencilStoreOp:"store"},i={colorAttachments:[e],depthStencilAttachment:t};this.commandEncoder=(o=this.device)==null?void 0:o.createCommandEncoder(),this.passEncoder=(n=this.commandEncoder)==null?void 0:n.beginRenderPass(i),(c=this.passEncoder)==null||c.setPipeline(this.pipeline),(u=this.passEncoder)==null||u.setViewport(0,0,this.canvas.width,this.canvas.height,0,1),(m=this.passEncoder)==null||m.setScissorRect(0,0,this.canvas.width,this.canvas.height),(p=this.passEncoder)==null||p.setVertexBuffer(0,this.positionBuffer),(f=this.passEncoder)==null||f.setVertexBuffer(1,this.colorBuffer),(l=this.passEncoder)==null||l.setIndexBuffer(this.indexBuffer,"uint16"),(h=this.passEncoder)==null||h.drawIndexed(3,1),(d=this.passEncoder)==null||d.endPass(),(g=this.queue)==null||g.submit([this.commandEncoder.finish()])}}var S="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part2/index.tsx";const De=()=>(M.exports.useEffect(()=>{const s=document.getElementById("gfx");s.width=document.body.clientWidth,s.height=document.body.clientHeight,new Ve(s).start(),window.onresize=function(){s.width=document.body.clientWidth,s.height=document.body.clientHeight}}),a.createElement("div",{className:$e.part,__self:globalThis,__source:{fileName:S,lineNumber:17,columnNumber:10}},a.createElement("canvas",{id:"gfx",__self:globalThis,__source:{fileName:S,lineNumber:18,columnNumber:5}}))),qe="_part_pfhqm_1",Ce="_card_pfhqm_1",Ge="_footer_pfhqm_4";var Fe={part:qe,card:Ce,footer:Ge},Re=`@stage(vertex)
fn main(@builtin(vertex_index) VertexIndex : u32) -> @builtin(position) vec4<f32> {
    var pos = array<vec2<f32>, 3>(
	    vec2<f32>(0.0, 0.5),
	    vec2<f32>(-0.5, -0.5),
	    vec2<f32>(0.5, -0.5)
    );
    return vec4<f32>(pos[VertexIndex], 0.0, 1.0);
}`,je=`@stage(fragment)
fn main() -> @location(0) vec4<f32> {
    return vec4<f32>(1.0, 0.0, 0.0, 1.0);
}`;class Se{constructor(e){r(this,"adapter");r(this,"device");r(this,"context");r(this,"format");r(this,"pipeline");r(this,"devicePixelRatio",window.devicePixelRatio|1);r(this,"size",[0,0]);this.canvas=e,this.canvas=e;let t=e.clientWidth*this.devicePixelRatio,i=e.clientHeight*this.devicePixelRatio;this.size=[t,i]}async start(){await this.init()}async init(){var e,t;if(!this.canvas)throw new Error("\u6CA1\u6709Canvas Element");if(!navigator.gpu)throw new Error("\u4E0D\u652F\u6301GPU");if(this.adapter=await navigator.gpu.requestAdapter({powerPreference:"high-performance"})||void 0,!this.adapter)throw new Error("\u83B7\u53D6\u8BBE\u5907\u5931\u8D25");if(this.device=await this.adapter.requestDevice(),!this.device)throw new Error("\u8BBE\u5907\u672A\u627E\u5230");this.context=this.canvas.getContext("webgpu")||void 0,this.format=(e=this.context)==null?void 0:e.getPreferredFormat(this.adapter),(t=this.context)==null||t.configure({device:this.device,format:this.format,size:this.size}),await this.run()}async run(){await this.initPipeline(),this.draw()}async initPipeline(){const e={vertex:{module:this.device.createShaderModule({code:Re}),entryPoint:"main"},fragment:{module:this.device.createShaderModule({code:je}),entryPoint:"main",targets:[{format:this.format}]},primitive:{topology:"triangle-list"}};this.pipeline=await this.device.createRenderPipelineAsync(e)}async draw(){var c,u;const e=(c=this.device)==null?void 0:c.createCommandEncoder(),i={colorAttachments:[{view:this.context.getCurrentTexture().createView(),clearValue:{r:0,g:0,b:0,a:1},loadOp:"clear",storeOp:"store",loadValue:{r:0,g:0,b:0,a:1}}]},o=e.beginRenderPass(i);o==null||o.setPipeline(this.pipeline),o==null||o.draw(3,1,0,0),o.end();const n=e.finish();(u=this.device)==null||u.queue.submit([n])}}var O="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part3/index.tsx";const Oe=()=>(M.exports.useEffect(()=>{const s=document.getElementById("gfx");s.width=document.body.clientWidth,s.height=document.body.clientHeight,new Se(s).start(),window.onresize=function(){s.width=document.body.clientWidth,s.height=document.body.clientHeight}}),a.createElement("div",{className:Fe.part,__self:globalThis,__source:{fileName:O,lineNumber:17,columnNumber:10}},a.createElement("canvas",{id:"gfx",__self:globalThis,__source:{fileName:O,lineNumber:18,columnNumber:5}}))),ze="_part_pfhqm_1",Le="_card_pfhqm_1",He="_footer_pfhqm_4";var Ie={part:ze,card:Le,footer:He},We=`struct Uniforms {
  modelViewProjectionMatrix : mat4x4<f32>;
};
@binding(0) @group(0) var<uniform> uniforms : Uniforms;

struct VertexOutput {
  @builtin(position) Position : vec4<f32>;
  @location(0) fragUV : vec2<f32>;
  @location(1) fragPosition: vec4<f32>;
};

@stage(vertex)
fn main(@location(0) position : vec4<f32>,
        @location(1) uv : vec2<f32>) -> VertexOutput {
  var output : VertexOutput;
  output.Position = uniforms.modelViewProjectionMatrix * position;
  output.fragUV = uv;
  output.fragPosition = 0.5 * (position + vec4<f32>(1.0, 1.0, 1.0, 1.0));
  return output;
}`,ke=`@stage(fragment)
fn main(@location(0) fragUV: vec2<f32>,
        @location(1) fragPosition: vec4<f32>) -> @location(0) vec4<f32> {
  return fragPosition;
}`;const Xe=4*10,Ye=0,Ke=4*8,Qe=36,z=new Float32Array([1,-1,1,1,1,0,1,1,1,1,-1,-1,1,1,0,0,1,1,0,1,-1,-1,-1,1,0,0,0,1,0,0,1,-1,-1,1,1,0,0,1,1,0,1,-1,1,1,1,0,1,1,1,1,-1,-1,-1,1,0,0,0,1,0,0,1,1,1,1,1,1,1,1,1,1,1,-1,1,1,1,0,1,1,0,1,1,-1,-1,1,1,0,0,1,0,0,1,1,-1,1,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,1,-1,-1,1,1,0,0,1,0,0,-1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,-1,1,1,1,0,1,0,0,-1,1,-1,1,0,1,0,1,1,0,-1,1,1,1,0,1,1,1,1,1,1,1,-1,1,1,1,0,1,0,0,-1,-1,1,1,0,0,1,1,1,1,-1,1,1,1,0,1,1,1,0,1,-1,1,-1,1,0,1,0,1,0,0,-1,-1,-1,1,0,0,0,1,1,0,-1,-1,1,1,0,0,1,1,1,1,-1,1,-1,1,0,1,0,1,0,0,1,1,1,1,1,1,1,1,1,1,-1,1,1,1,0,1,1,1,0,1,-1,-1,1,1,0,0,1,1,0,0,-1,-1,1,1,0,0,1,1,0,0,1,-1,1,1,1,0,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,-1,-1,1,1,0,0,1,1,1,-1,-1,-1,1,0,0,0,1,0,1,-1,1,-1,1,0,1,0,1,0,0,1,1,-1,1,1,1,0,1,1,0,1,-1,-1,1,1,0,0,1,1,1,-1,1,-1,1,0,1,0,1,0,0]);class Ze{constructor(e){r(this,"adapter");r(this,"device");r(this,"context");r(this,"format");r(this,"devicePixelRatio",window.devicePixelRatio|1);r(this,"size",[0,0]);r(this,"uniformBuffer");r(this,"renderPassDescriptor");r(this,"pipeline");r(this,"uniformBindGroup");r(this,"verticesBuffer");r(this,"projectionMatrix");r(this,"render",()=>{var o,n,c,u;const e=this.getTransformationMatrix();(o=this.device)==null||o.queue.writeBuffer(this.uniformBuffer,0,e.buffer,e.byteOffset,e.byteLength),this.renderPassDescriptor.colorAttachments[0].view=(n=this.context)==null?void 0:n.getCurrentTexture().createView();const t=(c=this.device)==null?void 0:c.createCommandEncoder(),i=t==null?void 0:t.beginRenderPass(this.renderPassDescriptor);i==null||i.setPipeline(this.pipeline),i==null||i.setBindGroup(0,this.uniformBindGroup),i==null||i.setVertexBuffer(0,this.verticesBuffer),i==null||i.draw(Qe,1,0,0),i==null||i.end(),(u=this.device)==null||u.queue.submit([t.finish()]),requestAnimationFrame(this.render)});this.canvas=e,this.canvas=e;let t=e.clientWidth*this.devicePixelRatio,i=e.clientHeight*this.devicePixelRatio;this.size=[t,i]}async start(){var e,t;if(!this.canvas)throw new Error("\u6CA1\u6709Canvas Element");if(!navigator.gpu)throw new Error("\u4E0D\u652F\u6301GPU");if(this.adapter=await navigator.gpu.requestAdapter({powerPreference:"high-performance"})||void 0,!this.adapter)throw new Error("\u83B7\u53D6\u8BBE\u5907\u5931\u8D25");if(this.device=await this.adapter.requestDevice(),!this.device)throw new Error("\u8BBE\u5907\u672A\u627E\u5230");this.context=this.canvas.getContext("webgpu"),this.format=(e=this.context)==null?void 0:e.getPreferredFormat(this.adapter),(t=this.context)==null||t.configure({device:this.device,format:this.format,size:this.size}),await this.init()}async init(){var f,l,h,d;const e=(f=this.device)==null?void 0:f.createBuffer({size:z.byteLength,usage:GPUBufferUsage.VERTEX,mappedAtCreation:!0});new Float32Array(e.getMappedRange()).set(z),e==null||e.unmap(),this.verticesBuffer=e;const t=(l=this.device)==null?void 0:l.createRenderPipeline({vertex:{module:this.device.createShaderModule({code:We}),entryPoint:"main",buffers:[{arrayStride:Xe,attributes:[{shaderLocation:0,offset:Ye,format:"float32x4"},{shaderLocation:1,offset:Ke,format:"float32x2"}]}]},fragment:{module:this.device.createShaderModule({code:ke}),entryPoint:"main",targets:[{format:this.format}]},primitive:{topology:"triangle-list",cullMode:"back"},depthStencil:{depthWriteEnabled:!0,depthCompare:"less",format:"depth24plus"}});this.pipeline=t;const i=(h=this.device)==null?void 0:h.createTexture({size:this.size,format:"depth24plus",usage:GPUTextureUsage.RENDER_ATTACHMENT}),o=4*16,n=this.device.createBuffer({size:o,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST});this.uniformBuffer=n;const c=(d=this.device)==null?void 0:d.createBindGroup({layout:t.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:n}}]});this.uniformBindGroup=c;const u={colorAttachments:[{view:void 0,clearValue:{r:.5,g:.5,b:.5,a:1},loadOp:"clear",storeOp:"store"}],depthStencilAttachment:{view:i.createView(),depthClearValue:1,depthStoreOp:"store",depthLoadOp:"clear"}};this.renderPassDescriptor=u;const m=_();this.projectionMatrix=m;const p=this.canvas.clientWidth/this.canvas.clientHeight;k(m,2*Math.PI/5,p,1,100),this.render()}getTransformationMatrix(){const e=_();V(e,e,P(0,0,-4));const t=Date.now()/1e3;F(e,e,1,P(Math.sin(t),Math.cos(t),0));const i=_();return T(i,this.projectionMatrix,e),i}}var L="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part4/index.tsx";const Je=()=>(M.exports.useEffect(()=>{const s=document.getElementById("gfx");s.width=document.body.clientWidth,s.height=document.body.clientHeight,new Ze(s).start(),window.onresize=function(){s.width=document.body.clientWidth,s.height=document.body.clientHeight}}),a.createElement("div",{className:Ie.part,__self:globalThis,__source:{fileName:L,lineNumber:17,columnNumber:10}},a.createElement("canvas",{id:"gfx",__self:globalThis,__source:{fileName:L,lineNumber:18,columnNumber:5}}))),et="_part_pfhqm_1",tt="_card_pfhqm_1",rt="_footer_pfhqm_4";var it={part:et,card:tt,footer:rt},ot=`struct Uniforms {
  modelViewProjectionMatrix : mat4x4<f32>;
};
@binding(0) @group(0) var<uniform> uniforms : Uniforms;

struct VertexOutput {
  @builtin(position) Position : vec4<f32>;
  @location(0) fragUV : vec2<f32>;
  @location(1) fragPosition: vec4<f32>;
};

@stage(vertex)
fn main(@location(0) position : vec4<f32>,
        @location(1) uv : vec2<f32>) -> VertexOutput {
  var output : VertexOutput;
  output.Position = uniforms.modelViewProjectionMatrix * position;
  output.fragUV = uv;
  output.fragPosition = 0.5 * (position + vec4<f32>(1.0, 1.0, 1.0, 1.0));
  return output;
}`,st=`@stage(fragment)
fn main(@location(0) fragUV: vec2<f32>,
        @location(1) fragPosition: vec4<f32>) -> @location(0) vec4<f32> {
  return fragPosition;
}`;const at=4*10,nt=0,ct=4*8,H=36,I=new Float32Array([1,-1,1,1,1,0,1,1,1,1,-1,-1,1,1,0,0,1,1,0,1,-1,-1,-1,1,0,0,0,1,0,0,1,-1,-1,1,1,0,0,1,1,0,1,-1,1,1,1,0,1,1,1,1,-1,-1,-1,1,0,0,0,1,0,0,1,1,1,1,1,1,1,1,1,1,1,-1,1,1,1,0,1,1,0,1,1,-1,-1,1,1,0,0,1,0,0,1,1,-1,1,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,1,-1,-1,1,1,0,0,1,0,0,-1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,-1,1,1,1,0,1,0,0,-1,1,-1,1,0,1,0,1,1,0,-1,1,1,1,0,1,1,1,1,1,1,1,-1,1,1,1,0,1,0,0,-1,-1,1,1,0,0,1,1,1,1,-1,1,1,1,0,1,1,1,0,1,-1,1,-1,1,0,1,0,1,0,0,-1,-1,-1,1,0,0,0,1,1,0,-1,-1,1,1,0,0,1,1,1,1,-1,1,-1,1,0,1,0,1,0,0,1,1,1,1,1,1,1,1,1,1,-1,1,1,1,0,1,1,1,0,1,-1,-1,1,1,0,0,1,1,0,0,-1,-1,1,1,0,0,1,1,0,0,1,-1,1,1,1,0,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,-1,-1,1,1,0,0,1,1,1,-1,-1,-1,1,0,0,0,1,0,1,-1,1,-1,1,0,1,0,1,0,0,1,1,-1,1,1,1,0,1,1,0,1,-1,-1,1,1,0,0,1,1,1,-1,1,-1,1,0,1,0,1,0,0]);class ut{constructor(e){r(this,"adapter");r(this,"device");r(this,"context");r(this,"format");r(this,"devicePixelRatio",window.devicePixelRatio|1);r(this,"size",[0,0]);r(this,"uniformBuffer");r(this,"renderPassDescriptor");r(this,"pipeline");r(this,"uniformBindGroup");r(this,"uniformBindGroup2");r(this,"verticesBuffer");r(this,"projectionMatrix");r(this,"modelMatrix");r(this,"modelMatrix2");r(this,"modelViewProjectionMatrix");r(this,"modelViewProjectionMatrix2");r(this,"tmpMat4");r(this,"tmpMat42");r(this,"viewMatrix");r(this,"render",()=>{var i,o,n,c,u;this.updateTransfromationMatrix(),(i=this.device)==null||i.queue.writeBuffer(this.uniformBuffer,0,this.modelViewProjectionMatrix.buffer,this.modelViewProjectionMatrix.byteOffset,this.modelViewProjectionMatrix.byteLength),(o=this.device)==null||o.queue.writeBuffer(this.uniformBuffer,256,this.modelViewProjectionMatrix2.buffer,this.modelViewProjectionMatrix2.byteOffset,this.modelViewProjectionMatrix2.byteLength),this.renderPassDescriptor.colorAttachments[0].view=(n=this.context)==null?void 0:n.getCurrentTexture().createView();const e=(c=this.device)==null?void 0:c.createCommandEncoder(),t=e==null?void 0:e.beginRenderPass(this.renderPassDescriptor);t==null||t.setPipeline(this.pipeline),t==null||t.setVertexBuffer(0,this.verticesBuffer),t==null||t.setBindGroup(0,this.uniformBindGroup),t==null||t.draw(H,1,0,0),t==null||t.setBindGroup(0,this.uniformBindGroup2),t==null||t.draw(H,1,0,0),t==null||t.end(),(u=this.device)==null||u.queue.submit([e.finish()]),requestAnimationFrame(this.render)});this.canvas=e,this.canvas=e;let t=e.clientWidth*this.devicePixelRatio,i=e.clientHeight*this.devicePixelRatio;this.size=[t,i]}async start(){var e,t;if(!this.canvas)throw U.error("\u6CA1\u6709Canvas Element",10),new Error("\u6CA1\u6709Canvas Element");if(!navigator.gpu)throw U.error("\u4E0D\u652F\u6301\u4F7F\u7528\u663E\u5361\u8BBE\u5907",10),new Error("\u4E0D\u652F\u6301\u663E\u5361\u8BBE\u5907");if(this.adapter=await navigator.gpu.requestAdapter({powerPreference:"high-performance"})||void 0,!this.adapter)throw U.error("\u83B7\u53D6\u663E\u5361\u8BBE\u5907\u5931\u8D25",10),new Error("\u83B7\u53D6\u663E\u5361\u8BBE\u5907\u5931\u8D25");if(this.device=await this.adapter.requestDevice(),!this.device)throw U.error("\u663E\u5361\u8BBE\u5907\u672A\u627E\u5230",10),new Error("\u663E\u5361\u8BBE\u5907\u672A\u627E\u5230");this.context=this.canvas.getContext("webgpu"),this.format=(e=this.context)==null?void 0:e.getPreferredFormat(this.adapter),(t=this.context)==null||t.configure({device:this.device,format:this.format,size:this.size}),await this.init()}async init(){var d,g,E,b,w;const e=(d=this.device)==null?void 0:d.createBuffer({size:I.byteLength,usage:GPUBufferUsage.VERTEX,mappedAtCreation:!0});new Float32Array(e.getMappedRange()).set(I),e==null||e.unmap(),this.verticesBuffer=e;const t=(g=this.device)==null?void 0:g.createRenderPipeline({vertex:{module:this.device.createShaderModule({code:ot}),entryPoint:"main",buffers:[{arrayStride:at,attributes:[{shaderLocation:0,offset:nt,format:"float32x4"},{shaderLocation:1,offset:ct,format:"float32x2"}]}]},fragment:{module:this.device.createShaderModule({code:st}),entryPoint:"main",targets:[{format:this.format}]},primitive:{topology:"triangle-list",cullMode:"back"},depthStencil:{depthWriteEnabled:!0,depthCompare:"less",format:"depth24plus"}});this.pipeline=t;const i=(E=this.device)==null?void 0:E.createTexture({size:this.size,format:"depth24plus",usage:GPUTextureUsage.RENDER_ATTACHMENT}),o=4*16,n=256,c=n+o,u=this.device.createBuffer({size:c,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST});this.uniformBuffer=u;const m=(b=this.device)==null?void 0:b.createBindGroup({layout:t.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:u,offset:0,size:o}}]});this.uniformBindGroup=m;const p=(w=this.device)==null?void 0:w.createBindGroup({layout:t.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:u,offset:n,size:o}}]});this.uniformBindGroup2=p;const f={colorAttachments:[{view:void 0,clearValue:{r:.5,g:.5,b:.5,a:1},loadOp:"clear",storeOp:"store"}],depthStencilAttachment:{view:i.createView(),depthClearValue:1,depthStoreOp:"store",depthLoadOp:"clear"}};this.renderPassDescriptor=f;const l=_();this.projectionMatrix=l;const h=this.canvas.clientWidth/this.canvas.clientHeight;k(l,2*Math.PI/5,h,1,100),this.getTransformationMatrix(),this.render()}getTransformationMatrix(){const e=_();V(e,e,P(-2,0,0)),this.modelMatrix=e;const t=_();V(t,t,P(2,0,0)),this.modelMatrix2=t;const i=_();this.modelViewProjectionMatrix=i;const o=_();this.modelViewProjectionMatrix2=o;const n=_();V(n,n,P(0,0,-7)),this.viewMatrix=n;const c=_(),u=_();this.tmpMat4=c,this.tmpMat42=u}updateTransfromationMatrix(){const e=Date.now()/1e3;F(this.tmpMat4,this.modelMatrix,1,P(Math.sin(e),Math.cos(e),0)),F(this.tmpMat42,this.modelMatrix2,1,P(Math.cos(e),Math.sin(e),0)),T(this.modelViewProjectionMatrix,this.viewMatrix,this.tmpMat4),T(this.modelViewProjectionMatrix,this.projectionMatrix,this.modelViewProjectionMatrix),T(this.modelViewProjectionMatrix2,this.viewMatrix,this.tmpMat42),T(this.modelViewProjectionMatrix2,this.projectionMatrix,this.modelViewProjectionMatrix2)}}var W="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part5/index.tsx";const lt=()=>(M.exports.useEffect(()=>{const s=document.getElementById("gfx");s.width=document.body.clientWidth,s.height=document.body.clientHeight,new ut(s).start(),window.onresize=function(){s.width=document.body.clientWidth,s.height=document.body.clientHeight}}),a.createElement("div",{className:it.part,__self:globalThis,__source:{fileName:W,lineNumber:17,columnNumber:10}},a.createElement("canvas",{id:"gfx",__self:globalThis,__source:{fileName:W,lineNumber:18,columnNumber:5}}))),dt="_part_pfhqm_1",mt="_card_pfhqm_1",ft="_footer_pfhqm_4";var ht={part:dt,card:mt,footer:ft},pt="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part6/index.tsx";const _t=()=>a.createElement("div",{className:ht.part,__self:globalThis,__source:{fileName:pt,lineNumber:3,columnNumber:10}},"part6"),gt="_part_pfhqm_1",xt="_card_pfhqm_1",vt="_footer_pfhqm_4";var bt={part:gt,card:xt,footer:vt},wt="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part7/index.tsx";const Nt=()=>a.createElement("div",{className:bt.part,__self:globalThis,__source:{fileName:wt,lineNumber:3,columnNumber:10}},"part7"),Pt="_part_pfhqm_1",yt="_card_pfhqm_1",Et="_footer_pfhqm_4";var $t={part:Pt,card:yt,footer:Et},Bt="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part8/index.tsx";const Tt=()=>a.createElement("div",{className:$t.part,__self:globalThis,__source:{fileName:Bt,lineNumber:3,columnNumber:10}},"part8"),Mt="_part_pfhqm_1",Ut="_card_pfhqm_1",At="_footer_pfhqm_4";var Vt={part:Mt,card:Ut,footer:At},Dt="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part9/index.tsx";const qt=()=>a.createElement("div",{className:Vt.part,__self:globalThis,__source:{fileName:Dt,lineNumber:3,columnNumber:10}},"part9"),Ct="_part_pfhqm_1",Gt="_card_pfhqm_1",Ft="_footer_pfhqm_4";var Rt={part:Ct,card:Gt,footer:Ft},jt="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part10/index.tsx";const St=()=>a.createElement("div",{className:Rt.part,__self:globalThis,__source:{fileName:jt,lineNumber:3,columnNumber:10}},"part10"),Ot="_part_pfhqm_1",zt="_card_pfhqm_1",Lt="_footer_pfhqm_4";var Ht={part:Ot,card:zt,footer:Lt},It="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part11/index.tsx";const Wt=()=>a.createElement("div",{className:Ht.part,__self:globalThis,__source:{fileName:It,lineNumber:3,columnNumber:10}},"part11"),kt="_part_pfhqm_1",Xt="_card_pfhqm_1",Yt="_footer_pfhqm_4";var Kt={part:kt,card:Xt,footer:Yt},Qt="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part12/index.tsx";const Zt=()=>a.createElement("div",{className:Kt.part,__self:globalThis,__source:{fileName:Qt,lineNumber:3,columnNumber:10}},"part12"),Jt="_part_pfhqm_1",er="_card_pfhqm_1",tr="_footer_pfhqm_4";var rr={part:Jt,card:er,footer:tr},ir="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part13/index.tsx";const or=()=>a.createElement("div",{className:rr.part,__self:globalThis,__source:{fileName:ir,lineNumber:3,columnNumber:10}},"part13"),sr="_part_pfhqm_1",ar="_card_pfhqm_1",nr="_footer_pfhqm_4";var cr={part:sr,card:ar,footer:nr},ur="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part14/index.tsx";const lr=()=>a.createElement("div",{className:cr.part,__self:globalThis,__source:{fileName:ur,lineNumber:3,columnNumber:10}},"part14"),dr="_part_pfhqm_1",mr="_card_pfhqm_1",fr="_footer_pfhqm_4";var hr={part:dr,card:mr,footer:fr},pr="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part15/index.tsx";const _r=()=>a.createElement("div",{className:hr.part,__self:globalThis,__source:{fileName:pr,lineNumber:3,columnNumber:10}},"part15"),gr="_part_pfhqm_1",xr="_card_pfhqm_1",vr="_footer_pfhqm_4";var br={part:gr,card:xr,footer:vr},wr="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part16/index.tsx";const Nr=()=>a.createElement("div",{className:br.part,__self:globalThis,__source:{fileName:wr,lineNumber:3,columnNumber:10}},"part16"),Pr="_part_pfhqm_1",yr="_card_pfhqm_1",Er="_footer_pfhqm_4";var $r={part:Pr,card:yr,footer:Er},Br="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part17/index.tsx";const Tr=()=>a.createElement("div",{className:$r.part,__self:globalThis,__source:{fileName:Br,lineNumber:3,columnNumber:10}},"part17"),Mr="_part_pfhqm_1",Ur="_card_pfhqm_1",Ar="_footer_pfhqm_4";var Vr={part:Mr,card:Ur,footer:Ar},Dr="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part18/index.tsx";const qr=()=>a.createElement("div",{className:Vr.part,__self:globalThis,__source:{fileName:Dr,lineNumber:3,columnNumber:10}},"part18"),Cr="_part_pfhqm_1",Gr="_card_pfhqm_1",Fr="_footer_pfhqm_4";var Rr={part:Cr,card:Gr,footer:Fr},jr="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part19/index.tsx";const Sr=()=>a.createElement("div",{className:Rr.part,__self:globalThis,__source:{fileName:jr,lineNumber:3,columnNumber:10}},"part19"),Or="_part_pfhqm_1",zr="_card_pfhqm_1",Lr="_footer_pfhqm_4";var Hr={part:Or,card:zr,footer:Lr},Ir="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part20/index.tsx";const Wr=()=>a.createElement("div",{className:Hr.part,__self:globalThis,__source:{fileName:Ir,lineNumber:3,columnNumber:10}},"part20"),kr=[{path:"/",element:ce},{path:"/part1",element:Ne},{path:"/part2",element:De},{path:"/part3",element:Oe},{path:"/part4",element:Je},{path:"/part5",element:lt},{path:"/part6",element:_t},{path:"/part7",element:Nt},{path:"/part8",element:Tt},{path:"/part9",element:qt},{path:"/part10",element:St},{path:"/part11",element:Wt},{path:"/part12",element:Zt},{path:"/part13",element:or},{path:"/part14",element:lr},{path:"/part15",element:_r},{path:"/part16",element:Nr},{path:"/part17",element:Tr},{path:"/part18",element:qr},{path:"/part19",element:Sr},{path:"/part20",element:Wr},{path:"about",element:ue},{path:"404",element:de}];var Xr="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/App.tsx";const Yr=()=>{let s=[];kr.forEach((t,i)=>{const o=t.element,n={path:t.path,element:a.createElement(o,{__self:globalThis,__source:{fileName:Xr,lineNumber:11,columnNumber:16}})};s.push(n)});const e=ee([...s]);return a.createElement(a.Fragment,null,e)};var G="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/main.tsx";te.render(a.createElement(a.StrictMode,{__self:globalThis,__source:{fileName:G,lineNumber:8,columnNumber:3}},a.createElement(ie,{history:X,__self:globalThis,__source:{fileName:G,lineNumber:9,columnNumber:5}},a.createElement(Yr,{__self:globalThis,__source:{fileName:G,lineNumber:10,columnNumber:7}}))),document.getElementById("root"));
