var X=Object.defineProperty;var Y=(s,e,t)=>e in s?X(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var r=(s,e,t)=>(Y(s,typeof e!="symbol"?e+"":e,t),t);import{c as K,R as a,a as Q,L as q,_ as $,b as w,p as z,t as L,f as U,r as I,m as H,u as Z,d as J}from"./vendor.ba5af298.js";const ee=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(o){if(o.ep)return;o.ep=!0;const n=t(o);fetch(o.href,n)}};ee();const W=K(),te=({history:s,children:e})=>{const[t,i]=a.useState({action:s.action,location:s.location});return a.useLayoutEffect(()=>{s.listen(i)},[s]),a.createElement(Q,Object.assign({children:e,navigator:s},t))};const re="_Home_1ijc8_1",ie="_list_1ijc8_6",se="_card_1ijc8_11",oe="_footer_1ijc8_14";var T={home:re,list:ie,card:se,footer:oe},g="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/pages/Home.tsx";const b=[];for(let s=0;s<5;s++)b.push({title:`part ${s+1}`,description:"Ant Design, a design language for background applications, is refined by Ant UED Team."});b[0].description="\u57FA\u7840\u521B\u5EFA\u6D41\u7A0B\u548C\u57FA\u7840\u56FE\u5F62\u4E09\u89D2\u5F62\u57FA\u7840";b[1].description="\u7BA1\u9053\u548CMSAA";b[2].description="\u6700\u5BB9\u6613\u7406\u89E3\u7684\u57FA\u7840\u4E09\u89D2\u5F62";b[3].description="\u65CB\u8F6C\u7684\u7ACB\u65B9\u4F53";b[4].description="\u4E24\u4E2A\u65CB\u8F6C\u7684\u7ACB\u65B9\u4F53";const ae=()=>{const s=e=>{W.push("/part"+e)};return a.createElement("div",{className:T.home,__self:globalThis,__source:{fileName:g,lineNumber:34,columnNumber:10}},a.createElement(q,{className:T.list,itemLayout:"vertical",size:"large",dataSource:b,footer:a.createElement("div",{className:T.footer,__self:globalThis,__source:{fileName:g,lineNumber:41,columnNumber:9}},a.createElement("a",{href:"https://blog.indeex.club",__self:globalThis,__source:{fileName:g,lineNumber:42,columnNumber:11}},a.createElement("b",{__self:globalThis,__source:{fileName:g,lineNumber:42,columnNumber:46}},"indeex"))," \xA9copyright 2022"),renderItem:(e,t)=>a.createElement(q.Item,{key:e.title,extra:a.createElement("img",{width:172,alt:"logo",src:"https://gw.alipayobjects.com/zos/rmsportal/mqaQswcyDLcXyDKnZfES.png",__self:globalThis,__source:{fileName:g,lineNumber:49,columnNumber:13}}),onClick:i=>s(t+1),className:T.card,__self:globalThis,__source:{fileName:g,lineNumber:46,columnNumber:9}},a.createElement(q.Item.Meta,{title:a.createElement("a",{href:e.href,__self:globalThis,__source:{fileName:g,lineNumber:59,columnNumber:20}},e.title),description:e.description,__self:globalThis,__source:{fileName:g,lineNumber:58,columnNumber:11}}),e.content),__self:globalThis,__source:{fileName:g,lineNumber:35,columnNumber:5}}))};var V="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/pages/About.tsx";const ne=()=>a.createElement("div",{__self:globalThis,__source:{fileName:V,lineNumber:2,columnNumber:12}},a.createElement("button",{__self:globalThis,__source:{fileName:V,lineNumber:3,columnNumber:7}},"\u5173\u4E8E\u8DF3\u8F6C"));var ce="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/pages/NotFound.tsx";const ue=()=>a.createElement("div",{__self:globalThis,__source:{fileName:ce,lineNumber:2,columnNumber:12}},"not found 404 page"),le="_part_pfhqm_1",de="_card_pfhqm_1",me="_footer_pfhqm_4";var fe={part:le,card:de,footer:me},pe=`struct VSOut {
    [[builtin(position)]] Position: vec4<f32>;
    [[location(0)]] color: vec3<f32>;
};

[[stage(vertex)]]
fn main([[location(0)]] inPos: vec3<f32>,
        [[location(1)]] inColor: vec3<f32>) -> VSOut {
    var vsOut: VSOut;
    vsOut.Position = vec4<f32>(inPos, 1.0);
    vsOut.color = inColor;
    return vsOut;
}`,he=`[[stage(fragment)]]
fn main([[location(0)]] inColor: vec3<f32>) -> [[location(0)]] vec4<f32> {
    return vec4<f32>(inColor, 1.0);
}`;const _e=new Float32Array([1,-1,0,-1,-1,0,0,1,0]),ge=new Float32Array([1,0,0,0,1,0,0,0,1]),ve=new Uint16Array([0,1,2]);class xe{constructor(e){r(this,"canvas");r(this,"adapter");r(this,"device");r(this,"queue");r(this,"context");r(this,"colorTexture");r(this,"colorTextureView");r(this,"depthTexture");r(this,"depthTextureView");r(this,"positionBuffer");r(this,"colorBuffer");r(this,"indexBuffer");r(this,"vertModule");r(this,"fragModule");r(this,"pipeline");r(this,"commandEncoder");r(this,"passEncoder");r(this,"render",()=>{var e,t;this.colorTexture=(e=this.context)==null?void 0:e.getCurrentTexture(),this.colorTextureView=(t=this.colorTexture)==null?void 0:t.createView(),this.encodeCommands(),requestAnimationFrame(this.render)});this.canvas=e}async start(){await this.initializeAPI()&&(this.resizeBackings(),await this.initializeResources(),this.render())}async initializeAPI(){var e;try{const t=navigator.gpu;if(!t)return console.log("not support!"),!1;this.adapter=await t.requestAdapter(),this.device=await this.adapter.requestDevice(),this.queue=(e=this.device)==null?void 0:e.queue}catch(t){return console.error(t),!1}return!0}async initializeResources(){var N,P,y,E;const e=(x,A)=>{let D={size:x.byteLength+3&-4,usage:A,mappedAtCreation:!0},_=this.device.createBuffer(D);return(x instanceof Uint16Array?new Uint16Array(_.getMappedRange()):new Float32Array(_.getMappedRange())).set(x),_.unmap(),_};this.positionBuffer=e(_e,GPUBufferUsage.VERTEX),this.colorBuffer=e(ge,GPUBufferUsage.VERTEX),this.indexBuffer=e(ve,GPUBufferUsage.INDEX);const t={code:pe};this.vertModule=(N=this.device)==null?void 0:N.createShaderModule(t);const i={code:he};this.fragModule=(P=this.device)==null?void 0:P.createShaderModule(i);const o={shaderLocation:0,offset:0,format:"float32x3"},n={shaderLocation:1,offset:0,format:"float32x3"},c={attributes:[o],arrayStride:4*3,stepMode:"vertex"},u={attributes:[n],arrayStride:4*3,stepMode:"vertex"},l={depthWriteEnabled:!0,depthCompare:"less",format:"depth24plus-stencil8"},h={bindGroupLayouts:[]},d=(y=this.device)==null?void 0:y.createPipelineLayout(h),m={module:this.vertModule,entryPoint:"main",buffers:[c,u]},f={format:"bgra8unorm"},p={module:this.fragModule,entryPoint:"main",targets:[f]},B={layout:d,vertex:m,fragment:p,primitive:{frontFace:"cw",cullMode:"none",topology:"triangle-list"},depthStencil:l};this.pipeline=(E=this.device)==null?void 0:E.createRenderPipeline(B)}resizeBackings(){var t,i,o;if(!this.context){this.context=this.canvas.getContext("webgpu");const n={device:this.device,format:"bgra8unorm",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC};(t=this.context)==null||t.configure(n)}const e={size:[this.canvas.width,this.canvas.height,1],dimension:"2d",format:"depth24plus-stencil8",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC};this.depthTexture=(i=this.device)==null?void 0:i.createTexture(e),this.depthTextureView=(o=this.depthTexture)==null?void 0:o.createView()}encodeCommands(){var o,n,c,u,l,h,d,m,f,p,v;let e={view:this.colorTextureView,loadValue:{r:0,g:0,b:0,a:1},storeOp:"store"};const t={view:this.depthTextureView,depthLoadValue:1,depthStoreOp:"store",stencilLoadValue:"load",stencilStoreOp:"store"},i={colorAttachments:[e],depthStencilAttachment:t};this.commandEncoder=(o=this.device)==null?void 0:o.createCommandEncoder(),this.passEncoder=(n=this.commandEncoder)==null?void 0:n.beginRenderPass(i),(c=this.passEncoder)==null||c.setPipeline(this.pipeline),(u=this.passEncoder)==null||u.setViewport(0,0,this.canvas.width,this.canvas.height,0,1),(l=this.passEncoder)==null||l.setScissorRect(0,0,this.canvas.width,this.canvas.height),(h=this.passEncoder)==null||h.setVertexBuffer(0,this.positionBuffer),(d=this.passEncoder)==null||d.setVertexBuffer(1,this.colorBuffer),(m=this.passEncoder)==null||m.setIndexBuffer(this.indexBuffer,"uint16"),(f=this.passEncoder)==null||f.drawIndexed(3,1),(p=this.passEncoder)==null||p.endPass(),(v=this.queue)==null||v.submit([this.commandEncoder.finish()])}}var M="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part1/index.tsx";const be=()=>($.exports.useEffect(()=>{const s=document.getElementById("gfx");s.width=document.body.clientWidth,s.height=document.body.clientHeight,new xe(s).start()}),a.createElement("div",{className:fe.part,__self:globalThis,__source:{fileName:M,lineNumber:13,columnNumber:10}},a.createElement("canvas",{id:"gfx",__self:globalThis,__source:{fileName:M,lineNumber:14,columnNumber:5}}))),we="_part_pfhqm_1",Ne="_card_pfhqm_1",Pe="_footer_pfhqm_4";var ye={part:we,card:Ne,footer:Pe},Ee=`@stage(vertex)
fn main(@builtin(vertex_index) VertexIndex : u32)
     -> @builtin(position) vec4<f32> {
  var pos = array<vec2<f32>, 3>(
      vec2<f32>(0.0, 0.5),
      vec2<f32>(-0.5, -0.5),
      vec2<f32>(0.5, -0.5));

  return vec4<f32>(pos[VertexIndex], 0.0, 1.0);
}`,$e=`@stage(fragment)
fn main() -> @location(0) vec4<f32> {
  return vec4<f32>(0.0, 1.0, 0.0, 1.0);
}`;const Te=new Float32Array([1,-1,0,-1,-1,0,0,1,0]),Ue=new Float32Array([1,0,0,0,1,0,0,0,1]),Be=new Uint16Array([0,1,2]);class Ae{constructor(e){r(this,"canvas");r(this,"adapter");r(this,"device");r(this,"queue");r(this,"context");r(this,"colorTexture");r(this,"colorTextureView");r(this,"depthTexture");r(this,"depthTextureView");r(this,"positionBuffer");r(this,"colorBuffer");r(this,"indexBuffer");r(this,"vertModule");r(this,"fragModule");r(this,"pipeline");r(this,"commandEncoder");r(this,"passEncoder");r(this,"tempCW",0);r(this,"tempCH",0);r(this,"render",()=>{var e,t;this.depthTexture&&this.tempCW!=this.canvas.width&&this.tempCH!=this.canvas.height&&(this.depthTexture.destroy(),this.start()),this.colorTexture=(e=this.context)==null?void 0:e.getCurrentTexture(),this.colorTextureView=(t=this.colorTexture)==null?void 0:t.createView(),this.encodeCommands(),requestAnimationFrame(this.render)});this.canvas=e,this.tempCW=this.canvas.width,this.tempCH=this.canvas.height}async start(){await this.initializeAPI()&&(this.resizeBackings(),await this.initializeResources(),this.render())}async initializeAPI(){var e;try{const t=navigator.gpu;if(!t)return console.log("not support!"),!1;this.adapter=await t.requestAdapter(),this.device=await this.adapter.requestDevice(),this.queue=(e=this.device)==null?void 0:e.queue}catch(t){return console.error(t),!1}return!0}async initializeResources(){var N,P,y,E;const e=(x,A)=>{let D={size:x.byteLength+3&-4,usage:A,mappedAtCreation:!0},_=this.device.createBuffer(D);return(x instanceof Uint16Array?new Uint16Array(_.getMappedRange()):new Float32Array(_.getMappedRange())).set(x),_.unmap(),_};this.positionBuffer=e(Te,GPUBufferUsage.VERTEX),this.colorBuffer=e(Ue,GPUBufferUsage.VERTEX),this.indexBuffer=e(Be,GPUBufferUsage.INDEX);const t={code:Ee};this.vertModule=(N=this.device)==null?void 0:N.createShaderModule(t);const i={code:$e};this.fragModule=(P=this.device)==null?void 0:P.createShaderModule(i);const o={shaderLocation:0,offset:0,format:"float32x3"},n={shaderLocation:1,offset:0,format:"float32x3"},c={attributes:[o],arrayStride:4*3,stepMode:"vertex"},u={attributes:[n],arrayStride:4*3,stepMode:"vertex"},l={depthWriteEnabled:!0,depthCompare:"less",format:"depth24plus-stencil8"},h={bindGroupLayouts:[]},d=(y=this.device)==null?void 0:y.createPipelineLayout(h),m={module:this.vertModule,entryPoint:"main",buffers:[c,u]},f={format:"bgra8unorm"},p={module:this.fragModule,entryPoint:"main",targets:[f]},B={layout:d,vertex:m,fragment:p,primitive:{frontFace:"cw",cullMode:"none",topology:"triangle-list"},depthStencil:l};this.pipeline=(E=this.device)==null?void 0:E.createRenderPipeline(B)}resizeBackings(){var t,i,o;if(!this.context){this.context=this.canvas.getContext("webgpu");const n={device:this.device,format:"bgra8unorm",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC};(t=this.context)==null||t.configure(n)}const e={size:[this.canvas.width,this.canvas.height,1],dimension:"2d",format:"depth24plus-stencil8",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC};this.depthTexture=(i=this.device)==null?void 0:i.createTexture(e),this.depthTextureView=(o=this.depthTexture)==null?void 0:o.createView()}encodeCommands(){var o,n,c,u,l,h,d,m,f,p,v;let e={view:this.colorTextureView,loadValue:{r:0,g:0,b:0,a:1},storeOp:"store"};const t={view:this.depthTextureView,depthLoadValue:1,depthStoreOp:"store",stencilLoadValue:"load",stencilStoreOp:"store"},i={colorAttachments:[e],depthStencilAttachment:t};this.commandEncoder=(o=this.device)==null?void 0:o.createCommandEncoder(),this.passEncoder=(n=this.commandEncoder)==null?void 0:n.beginRenderPass(i),(c=this.passEncoder)==null||c.setPipeline(this.pipeline),(u=this.passEncoder)==null||u.setViewport(0,0,this.canvas.width,this.canvas.height,0,1),(l=this.passEncoder)==null||l.setScissorRect(0,0,this.canvas.width,this.canvas.height),(h=this.passEncoder)==null||h.setVertexBuffer(0,this.positionBuffer),(d=this.passEncoder)==null||d.setVertexBuffer(1,this.colorBuffer),(m=this.passEncoder)==null||m.setIndexBuffer(this.indexBuffer,"uint16"),(f=this.passEncoder)==null||f.drawIndexed(3,1),(p=this.passEncoder)==null||p.endPass(),(v=this.queue)==null||v.submit([this.commandEncoder.finish()])}}var R="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part2/index.tsx";const De=()=>($.exports.useEffect(()=>{const s=document.getElementById("gfx");s.width=document.body.clientWidth,s.height=document.body.clientHeight,new Ae(s).start(),window.onresize=function(){s.width=document.body.clientWidth,s.height=document.body.clientHeight}}),a.createElement("div",{className:ye.part,__self:globalThis,__source:{fileName:R,lineNumber:17,columnNumber:10}},a.createElement("canvas",{id:"gfx",__self:globalThis,__source:{fileName:R,lineNumber:18,columnNumber:5}}))),qe="_part_pfhqm_1",Ce="_card_pfhqm_1",Ve="_footer_pfhqm_4";var Me={part:qe,card:Ce,footer:Ve},Re=`@stage(vertex)
fn main(@builtin(vertex_index) VertexIndex : u32) -> @builtin(position) vec4<f32> {
    var pos = array<vec2<f32>, 3>(
	    vec2<f32>(0.0, 0.5),
	    vec2<f32>(-0.5, -0.5),
	    vec2<f32>(0.5, -0.5)
    );
    return vec4<f32>(pos[VertexIndex], 0.0, 1.0);
}`,Fe=`@stage(fragment)
fn main() -> @location(0) vec4<f32> {
    return vec4<f32>(1.0, 0.0, 0.0, 1.0);
}`;class Ge{constructor(e){r(this,"adapter");r(this,"device");r(this,"context");r(this,"format");r(this,"pipeline");r(this,"devicePixelRatio",window.devicePixelRatio|1);r(this,"size",[0,0]);this.canvas=e,this.canvas=e;let t=e.clientWidth*this.devicePixelRatio,i=e.clientHeight*this.devicePixelRatio;this.size=[t,i]}async start(){await this.init()}async init(){var e,t;if(!this.canvas)throw new Error("\u6CA1\u6709Canvas Element");if(!navigator.gpu)throw new Error("\u4E0D\u652F\u6301GPU");if(this.adapter=await navigator.gpu.requestAdapter({powerPreference:"high-performance"})||void 0,!this.adapter)throw new Error("\u83B7\u53D6\u8BBE\u5907\u5931\u8D25");if(this.device=await this.adapter.requestDevice(),!this.device)throw new Error("\u8BBE\u5907\u672A\u627E\u5230");this.context=this.canvas.getContext("webgpu")||void 0,this.format=(e=this.context)==null?void 0:e.getPreferredFormat(this.adapter),(t=this.context)==null||t.configure({device:this.device,format:this.format,size:this.size}),await this.run()}async run(){await this.initPipeline(),this.draw()}async initPipeline(){const e={vertex:{module:this.device.createShaderModule({code:Re}),entryPoint:"main"},fragment:{module:this.device.createShaderModule({code:Fe}),entryPoint:"main",targets:[{format:this.format}]},primitive:{topology:"triangle-list"}};this.pipeline=await this.device.createRenderPipelineAsync(e)}async draw(){var c,u;const e=(c=this.device)==null?void 0:c.createCommandEncoder(),i={colorAttachments:[{view:this.context.getCurrentTexture().createView(),clearValue:{r:0,g:0,b:0,a:1},loadOp:"clear",storeOp:"store",loadValue:{r:0,g:0,b:0,a:1}}]},o=e.beginRenderPass(i);o==null||o.setPipeline(this.pipeline),o==null||o.draw(3,1,0,0),o.end();const n=e.finish();(u=this.device)==null||u.queue.submit([n])}}var F="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part3/index.tsx";const Se=()=>($.exports.useEffect(()=>{const s=document.getElementById("gfx");s.width=document.body.clientWidth,s.height=document.body.clientHeight,new Ge(s).start(),window.onresize=function(){s.width=document.body.clientWidth,s.height=document.body.clientHeight}}),a.createElement("div",{className:Me.part,__self:globalThis,__source:{fileName:F,lineNumber:17,columnNumber:10}},a.createElement("canvas",{id:"gfx",__self:globalThis,__source:{fileName:F,lineNumber:18,columnNumber:5}}))),je="_part_pfhqm_1",Oe="_card_pfhqm_1",ze="_footer_pfhqm_4";var Le={part:je,card:Oe,footer:ze},Ie=`struct Uniforms {
  modelViewProjectionMatrix : mat4x4<f32>;
};
@binding(0) @group(0) var<uniform> uniforms : Uniforms;

struct VertexOutput {
  @builtin(position) Position : vec4<f32>;
  @location(0) fragUV : vec2<f32>;
  @location(1) fragPosition: vec4<f32>;
};

@stage(vertex)
fn main(@location(0) position : vec4<f32>,
        @location(1) uv : vec2<f32>) -> VertexOutput {
  var output : VertexOutput;
  output.Position = uniforms.modelViewProjectionMatrix * position;
  output.fragUV = uv;
  output.fragPosition = 0.5 * (position + vec4<f32>(1.0, 1.0, 1.0, 1.0));
  return output;
}`,He=`@stage(fragment)
fn main(@location(0) fragUV: vec2<f32>,
        @location(1) fragPosition: vec4<f32>) -> @location(0) vec4<f32> {
  return fragPosition;
}`;const We=4*10,ke=0,Xe=4*8,Ye=36,G=new Float32Array([1,-1,1,1,1,0,1,1,1,1,-1,-1,1,1,0,0,1,1,0,1,-1,-1,-1,1,0,0,0,1,0,0,1,-1,-1,1,1,0,0,1,1,0,1,-1,1,1,1,0,1,1,1,1,-1,-1,-1,1,0,0,0,1,0,0,1,1,1,1,1,1,1,1,1,1,1,-1,1,1,1,0,1,1,0,1,1,-1,-1,1,1,0,0,1,0,0,1,1,-1,1,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,1,-1,-1,1,1,0,0,1,0,0,-1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,-1,1,1,1,0,1,0,0,-1,1,-1,1,0,1,0,1,1,0,-1,1,1,1,0,1,1,1,1,1,1,1,-1,1,1,1,0,1,0,0,-1,-1,1,1,0,0,1,1,1,1,-1,1,1,1,0,1,1,1,0,1,-1,1,-1,1,0,1,0,1,0,0,-1,-1,-1,1,0,0,0,1,1,0,-1,-1,1,1,0,0,1,1,1,1,-1,1,-1,1,0,1,0,1,0,0,1,1,1,1,1,1,1,1,1,1,-1,1,1,1,0,1,1,1,0,1,-1,-1,1,1,0,0,1,1,0,0,-1,-1,1,1,0,0,1,1,0,0,1,-1,1,1,1,0,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,-1,-1,1,1,0,0,1,1,1,-1,-1,-1,1,0,0,0,1,0,1,-1,1,-1,1,0,1,0,1,0,0,1,1,-1,1,1,1,0,1,1,0,1,-1,-1,1,1,0,0,1,1,1,-1,1,-1,1,0,1,0,1,0,0]);class Ke{constructor(e){r(this,"adapter");r(this,"device");r(this,"context");r(this,"format");r(this,"devicePixelRatio",window.devicePixelRatio|1);r(this,"size",[0,0]);r(this,"uniformBuffer");r(this,"renderPassDescriptor");r(this,"pipeline");r(this,"uniformBindGroup");r(this,"verticesBuffer");r(this,"projectionMatrix");r(this,"render",()=>{var o,n,c,u;const e=this.getTransformationMatrix();(o=this.device)==null||o.queue.writeBuffer(this.uniformBuffer,0,e.buffer,e.byteOffset,e.byteLength),this.renderPassDescriptor.colorAttachments[0].view=(n=this.context)==null?void 0:n.getCurrentTexture().createView();const t=(c=this.device)==null?void 0:c.createCommandEncoder(),i=t==null?void 0:t.beginRenderPass(this.renderPassDescriptor);i==null||i.setPipeline(this.pipeline),i==null||i.setBindGroup(0,this.uniformBindGroup),i==null||i.setVertexBuffer(0,this.verticesBuffer),i==null||i.draw(Ye,1,0,0),i==null||i.end(),(u=this.device)==null||u.queue.submit([t.finish()]),requestAnimationFrame(this.render)});this.canvas=e,this.canvas=e;let t=e.clientWidth*this.devicePixelRatio,i=e.clientHeight*this.devicePixelRatio;this.size=[t,i]}async start(){var e,t;if(!this.canvas)throw new Error("\u6CA1\u6709Canvas Element");if(!navigator.gpu)throw new Error("\u4E0D\u652F\u6301GPU");if(this.adapter=await navigator.gpu.requestAdapter({powerPreference:"high-performance"})||void 0,!this.adapter)throw new Error("\u83B7\u53D6\u8BBE\u5907\u5931\u8D25");if(this.device=await this.adapter.requestDevice(),!this.device)throw new Error("\u8BBE\u5907\u672A\u627E\u5230");this.context=this.canvas.getContext("webgpu"),this.format=(e=this.context)==null?void 0:e.getPreferredFormat(this.adapter),(t=this.context)==null||t.configure({device:this.device,format:this.format,size:this.size}),await this.init()}async init(){var d,m,f,p;const e=(d=this.device)==null?void 0:d.createBuffer({size:G.byteLength,usage:GPUBufferUsage.VERTEX,mappedAtCreation:!0});new Float32Array(e.getMappedRange()).set(G),e==null||e.unmap(),this.verticesBuffer=e;const t=(m=this.device)==null?void 0:m.createRenderPipeline({vertex:{module:this.device.createShaderModule({code:Ie}),entryPoint:"main",buffers:[{arrayStride:We,attributes:[{shaderLocation:0,offset:ke,format:"float32x4"},{shaderLocation:1,offset:Xe,format:"float32x2"}]}]},fragment:{module:this.device.createShaderModule({code:He}),entryPoint:"main",targets:[{format:this.format}]},primitive:{topology:"triangle-list",cullMode:"back"},depthStencil:{depthWriteEnabled:!0,depthCompare:"less",format:"depth24plus"}});this.pipeline=t;const i=(f=this.device)==null?void 0:f.createTexture({size:this.size,format:"depth24plus",usage:GPUTextureUsage.RENDER_ATTACHMENT}),o=4*16,n=this.device.createBuffer({size:o,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST});this.uniformBuffer=n;const c=(p=this.device)==null?void 0:p.createBindGroup({layout:t.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:n}}]});this.uniformBindGroup=c;const u={colorAttachments:[{view:void 0,clearValue:{r:.5,g:.5,b:.5,a:1},loadOp:"clear",storeOp:"store"}],depthStencilAttachment:{view:i.createView(),depthClearValue:1,depthStoreOp:"store",depthLoadOp:"clear"}};this.renderPassDescriptor=u;const l=w();this.projectionMatrix=l;const h=this.canvas.clientWidth/this.canvas.clientHeight;z(l,2*Math.PI/5,h,1,100),this.render()}getTransformationMatrix(){const e=w();L(e,e,U(0,0,-4));const t=Date.now()/1e3;I(e,e,1,U(Math.sin(t),Math.cos(t),0));const i=w();return H(i,this.projectionMatrix,e),i}}var S="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part4/index.tsx";const Qe=()=>($.exports.useEffect(()=>{const s=document.getElementById("gfx");s.width=document.body.clientWidth,s.height=document.body.clientHeight,new Ke(s).start(),window.onresize=function(){s.width=document.body.clientWidth,s.height=document.body.clientHeight}}),a.createElement("div",{className:Le.part,__self:globalThis,__source:{fileName:S,lineNumber:17,columnNumber:10}},a.createElement("canvas",{id:"gfx",__self:globalThis,__source:{fileName:S,lineNumber:18,columnNumber:5}}))),Ze="_part_pfhqm_1",Je="_card_pfhqm_1",et="_footer_pfhqm_4";var tt={part:Ze,card:Je,footer:et},rt=`struct Uniforms {
  modelViewProjectionMatrix : mat4x4<f32>;
};
@binding(0) @group(0) var<uniform> uniforms : Uniforms;

struct VertexOutput {
  @builtin(position) Position : vec4<f32>;
  @location(0) fragUV : vec2<f32>;
  @location(1) fragPosition: vec4<f32>;
};

@stage(vertex)
fn main(@location(0) position : vec4<f32>,
        @location(1) uv : vec2<f32>) -> VertexOutput {
  var output : VertexOutput;
  output.Position = uniforms.modelViewProjectionMatrix * position;
  output.fragUV = uv;
  output.fragPosition = 0.5 * (position + vec4<f32>(1.0, 1.0, 1.0, 1.0));
  return output;
}`,it=`@stage(fragment)
fn main(@location(0) fragUV: vec2<f32>,
        @location(1) fragPosition: vec4<f32>) -> @location(0) vec4<f32> {
  return fragPosition;
}`;const st=4*10,ot=0,at=4*8,nt=36,j=new Float32Array([1,-1,1,1,1,0,1,1,1,1,-1,-1,1,1,0,0,1,1,0,1,-1,-1,-1,1,0,0,0,1,0,0,1,-1,-1,1,1,0,0,1,1,0,1,-1,1,1,1,0,1,1,1,1,-1,-1,-1,1,0,0,0,1,0,0,1,1,1,1,1,1,1,1,1,1,1,-1,1,1,1,0,1,1,0,1,1,-1,-1,1,1,0,0,1,0,0,1,1,-1,1,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,1,-1,-1,1,1,0,0,1,0,0,-1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,-1,1,1,1,0,1,0,0,-1,1,-1,1,0,1,0,1,1,0,-1,1,1,1,0,1,1,1,1,1,1,1,-1,1,1,1,0,1,0,0,-1,-1,1,1,0,0,1,1,1,1,-1,1,1,1,0,1,1,1,0,1,-1,1,-1,1,0,1,0,1,0,0,-1,-1,-1,1,0,0,0,1,1,0,-1,-1,1,1,0,0,1,1,1,1,-1,1,-1,1,0,1,0,1,0,0,1,1,1,1,1,1,1,1,1,1,-1,1,1,1,0,1,1,1,0,1,-1,-1,1,1,0,0,1,1,0,0,-1,-1,1,1,0,0,1,1,0,0,1,-1,1,1,1,0,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,-1,-1,1,1,0,0,1,1,1,-1,-1,-1,1,0,0,0,1,0,1,-1,1,-1,1,0,1,0,1,0,0,1,1,-1,1,1,1,0,1,1,0,1,-1,-1,1,1,0,0,1,1,1,-1,1,-1,1,0,1,0,1,0,0]);class ct{constructor(e){r(this,"adapter");r(this,"device");r(this,"context");r(this,"format");r(this,"devicePixelRatio",window.devicePixelRatio|1);r(this,"size",[0,0]);r(this,"uniformBuffer");r(this,"renderPassDescriptor");r(this,"pipeline");r(this,"uniformBindGroup");r(this,"verticesBuffer");r(this,"projectionMatrix");r(this,"render",()=>{var o,n,c,u;const e=this.getTransformationMatrix();(o=this.device)==null||o.queue.writeBuffer(this.uniformBuffer,0,e.buffer,e.byteOffset,e.byteLength),this.renderPassDescriptor.colorAttachments[0].view=(n=this.context)==null?void 0:n.getCurrentTexture().createView();const t=(c=this.device)==null?void 0:c.createCommandEncoder(),i=t==null?void 0:t.beginRenderPass(this.renderPassDescriptor);i==null||i.setPipeline(this.pipeline),i==null||i.setBindGroup(0,this.uniformBindGroup),i==null||i.setVertexBuffer(0,this.verticesBuffer),i==null||i.draw(nt,1,0,0),i==null||i.end(),(u=this.device)==null||u.queue.submit([t.finish()]),requestAnimationFrame(this.render)});this.canvas=e,this.canvas=e;let t=e.clientWidth*this.devicePixelRatio,i=e.clientHeight*this.devicePixelRatio;this.size=[t,i]}async start(){var e,t;if(!this.canvas)throw new Error("\u6CA1\u6709Canvas Element");if(!navigator.gpu)throw new Error("\u4E0D\u652F\u6301GPU");if(this.adapter=await navigator.gpu.requestAdapter({powerPreference:"high-performance"})||void 0,!this.adapter)throw new Error("\u83B7\u53D6\u8BBE\u5907\u5931\u8D25");if(this.device=await this.adapter.requestDevice(),!this.device)throw new Error("\u8BBE\u5907\u672A\u627E\u5230");this.context=this.canvas.getContext("webgpu"),this.format=(e=this.context)==null?void 0:e.getPreferredFormat(this.adapter),(t=this.context)==null||t.configure({device:this.device,format:this.format,size:this.size}),await this.init()}async init(){var d,m,f,p;const e=(d=this.device)==null?void 0:d.createBuffer({size:j.byteLength,usage:GPUBufferUsage.VERTEX,mappedAtCreation:!0});new Float32Array(e.getMappedRange()).set(j),e==null||e.unmap(),this.verticesBuffer=e;const t=(m=this.device)==null?void 0:m.createRenderPipeline({vertex:{module:this.device.createShaderModule({code:rt}),entryPoint:"main",buffers:[{arrayStride:st,attributes:[{shaderLocation:0,offset:ot,format:"float32x4"},{shaderLocation:1,offset:at,format:"float32x2"}]}]},fragment:{module:this.device.createShaderModule({code:it}),entryPoint:"main",targets:[{format:this.format}]},primitive:{topology:"triangle-list",cullMode:"back"},depthStencil:{depthWriteEnabled:!0,depthCompare:"less",format:"depth24plus"}});this.pipeline=t;const i=(f=this.device)==null?void 0:f.createTexture({size:this.size,format:"depth24plus",usage:GPUTextureUsage.RENDER_ATTACHMENT}),o=4*16,n=this.device.createBuffer({size:o,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST});this.uniformBuffer=n;const c=(p=this.device)==null?void 0:p.createBindGroup({layout:t.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:n}}]});this.uniformBindGroup=c;const u={colorAttachments:[{view:void 0,clearValue:{r:.5,g:.5,b:.5,a:1},loadOp:"clear",storeOp:"store"}],depthStencilAttachment:{view:i.createView(),depthClearValue:1,depthStoreOp:"store",depthLoadOp:"clear"}};this.renderPassDescriptor=u;const l=w();this.projectionMatrix=l;const h=this.canvas.clientWidth/this.canvas.clientHeight;z(l,2*Math.PI/5,h,1,100),this.render()}getTransformationMatrix(){const e=w();L(e,e,U(0,0,-4));const t=Date.now()/1e3;I(e,e,1,U(Math.sin(t),Math.cos(t),0));const i=w();return H(i,this.projectionMatrix,e),i}}var O="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part5/index.tsx";const ut=()=>($.exports.useEffect(()=>{const s=document.getElementById("gfx");s.width=document.body.clientWidth,s.height=document.body.clientHeight,new ct(s).start(),window.onresize=function(){s.width=document.body.clientWidth,s.height=document.body.clientHeight}}),a.createElement("div",{className:tt.part,__self:globalThis,__source:{fileName:O,lineNumber:17,columnNumber:10}},a.createElement("canvas",{id:"gfx",__self:globalThis,__source:{fileName:O,lineNumber:18,columnNumber:5}}))),lt="_part_pfhqm_1",dt="_card_pfhqm_1",mt="_footer_pfhqm_4";var ft={part:lt,card:dt,footer:mt},pt="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part6/index.tsx";const ht=()=>a.createElement("div",{className:ft.part,__self:globalThis,__source:{fileName:pt,lineNumber:3,columnNumber:10}},"part6"),_t="_part_pfhqm_1",gt="_card_pfhqm_1",vt="_footer_pfhqm_4";var xt={part:_t,card:gt,footer:vt},bt="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part7/index.tsx";const wt=()=>a.createElement("div",{className:xt.part,__self:globalThis,__source:{fileName:bt,lineNumber:3,columnNumber:10}},"part7"),Nt="_part_pfhqm_1",Pt="_card_pfhqm_1",yt="_footer_pfhqm_4";var Et={part:Nt,card:Pt,footer:yt},$t="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part8/index.tsx";const Tt=()=>a.createElement("div",{className:Et.part,__self:globalThis,__source:{fileName:$t,lineNumber:3,columnNumber:10}},"part8"),Ut="_part_pfhqm_1",Bt="_card_pfhqm_1",At="_footer_pfhqm_4";var Dt={part:Ut,card:Bt,footer:At},qt="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part9/index.tsx";const Ct=()=>a.createElement("div",{className:Dt.part,__self:globalThis,__source:{fileName:qt,lineNumber:3,columnNumber:10}},"part9"),Vt="_part_pfhqm_1",Mt="_card_pfhqm_1",Rt="_footer_pfhqm_4";var Ft={part:Vt,card:Mt,footer:Rt},Gt="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part10/index.tsx";const St=()=>a.createElement("div",{className:Ft.part,__self:globalThis,__source:{fileName:Gt,lineNumber:3,columnNumber:10}},"part10"),jt="_part_pfhqm_1",Ot="_card_pfhqm_1",zt="_footer_pfhqm_4";var Lt={part:jt,card:Ot,footer:zt},It="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part11/index.tsx";const Ht=()=>a.createElement("div",{className:Lt.part,__self:globalThis,__source:{fileName:It,lineNumber:3,columnNumber:10}},"part11"),Wt="_part_pfhqm_1",kt="_card_pfhqm_1",Xt="_footer_pfhqm_4";var Yt={part:Wt,card:kt,footer:Xt},Kt="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part12/index.tsx";const Qt=()=>a.createElement("div",{className:Yt.part,__self:globalThis,__source:{fileName:Kt,lineNumber:3,columnNumber:10}},"part12"),Zt="_part_pfhqm_1",Jt="_card_pfhqm_1",er="_footer_pfhqm_4";var tr={part:Zt,card:Jt,footer:er},rr="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part13/index.tsx";const ir=()=>a.createElement("div",{className:tr.part,__self:globalThis,__source:{fileName:rr,lineNumber:3,columnNumber:10}},"part13"),sr="_part_pfhqm_1",or="_card_pfhqm_1",ar="_footer_pfhqm_4";var nr={part:sr,card:or,footer:ar},cr="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part14/index.tsx";const ur=()=>a.createElement("div",{className:nr.part,__self:globalThis,__source:{fileName:cr,lineNumber:3,columnNumber:10}},"part14"),lr="_part_pfhqm_1",dr="_card_pfhqm_1",mr="_footer_pfhqm_4";var fr={part:lr,card:dr,footer:mr},pr="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part15/index.tsx";const hr=()=>a.createElement("div",{className:fr.part,__self:globalThis,__source:{fileName:pr,lineNumber:3,columnNumber:10}},"part15"),_r="_part_pfhqm_1",gr="_card_pfhqm_1",vr="_footer_pfhqm_4";var xr={part:_r,card:gr,footer:vr},br="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part16/index.tsx";const wr=()=>a.createElement("div",{className:xr.part,__self:globalThis,__source:{fileName:br,lineNumber:3,columnNumber:10}},"part16"),Nr="_part_pfhqm_1",Pr="_card_pfhqm_1",yr="_footer_pfhqm_4";var Er={part:Nr,card:Pr,footer:yr},$r="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part17/index.tsx";const Tr=()=>a.createElement("div",{className:Er.part,__self:globalThis,__source:{fileName:$r,lineNumber:3,columnNumber:10}},"part17"),Ur="_part_pfhqm_1",Br="_card_pfhqm_1",Ar="_footer_pfhqm_4";var Dr={part:Ur,card:Br,footer:Ar},qr="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part18/index.tsx";const Cr=()=>a.createElement("div",{className:Dr.part,__self:globalThis,__source:{fileName:qr,lineNumber:3,columnNumber:10}},"part18"),Vr="_part_pfhqm_1",Mr="_card_pfhqm_1",Rr="_footer_pfhqm_4";var Fr={part:Vr,card:Mr,footer:Rr},Gr="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part19/index.tsx";const Sr=()=>a.createElement("div",{className:Fr.part,__self:globalThis,__source:{fileName:Gr,lineNumber:3,columnNumber:10}},"part19"),jr="_part_pfhqm_1",Or="_card_pfhqm_1",zr="_footer_pfhqm_4";var Lr={part:jr,card:Or,footer:zr},Ir="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/component/part20/index.tsx";const Hr=()=>a.createElement("div",{className:Lr.part,__self:globalThis,__source:{fileName:Ir,lineNumber:3,columnNumber:10}},"part20"),Wr=[{path:"/",element:ae},{path:"/part1",element:be},{path:"/part2",element:De},{path:"/part3",element:Se},{path:"/part4",element:Qe},{path:"/part5",element:ut},{path:"/part6",element:ht},{path:"/part7",element:wt},{path:"/part8",element:Tt},{path:"/part9",element:Ct},{path:"/part10",element:St},{path:"/part11",element:Ht},{path:"/part12",element:Qt},{path:"/part13",element:ir},{path:"/part14",element:ur},{path:"/part15",element:hr},{path:"/part16",element:wr},{path:"/part17",element:Tr},{path:"/part18",element:Cr},{path:"/part19",element:Sr},{path:"/part20",element:Hr},{path:"about",element:ne},{path:"404",element:ue}];var kr="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/App.tsx";const Xr=()=>{let s=[];Wr.forEach((t,i)=>{const o=t.element,n={path:t.path,element:a.createElement(o,{__self:globalThis,__source:{fileName:kr,lineNumber:11,columnNumber:16}})};s.push(n)});const e=Z([...s]);return a.createElement(a.Fragment,null,e)};var C="/Users/indeex/Documents/program/indeex/program/webGPU/wgsl-base/src/main.tsx";J.render(a.createElement(a.StrictMode,{__self:globalThis,__source:{fileName:C,lineNumber:8,columnNumber:3}},a.createElement(te,{history:W,__self:globalThis,__source:{fileName:C,lineNumber:9,columnNumber:5}},a.createElement(Xr,{__self:globalThis,__source:{fileName:C,lineNumber:10,columnNumber:7}}))),document.getElementById("root"));
