var S=1e-6,L=typeof Float32Array!="undefined"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var r=0,n=arguments.length;n--;)r+=arguments[n]*arguments[n];return Math.sqrt(r)});function _(){var r=new L(16);return L!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r}function B(r,n){return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r}function T(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function C(r,n,a){var e=n[0],v=n[1],i=n[2],s=n[3],c=n[4],h=n[5],y=n[6],f=n[7],l=n[8],M=n[9],p=n[10],g=n[11],w=n[12],F=n[13],Y=n[14],N=n[15],z=a[0],x=a[1],A=a[2],m=a[3];return r[0]=z*e+x*c+A*l+m*w,r[1]=z*v+x*h+A*M+m*F,r[2]=z*i+x*y+A*p+m*Y,r[3]=z*s+x*f+A*g+m*N,z=a[4],x=a[5],A=a[6],m=a[7],r[4]=z*e+x*c+A*l+m*w,r[5]=z*v+x*h+A*M+m*F,r[6]=z*i+x*y+A*p+m*Y,r[7]=z*s+x*f+A*g+m*N,z=a[8],x=a[9],A=a[10],m=a[11],r[8]=z*e+x*c+A*l+m*w,r[9]=z*v+x*h+A*M+m*F,r[10]=z*i+x*y+A*p+m*Y,r[11]=z*s+x*f+A*g+m*N,z=a[12],x=a[13],A=a[14],m=a[15],r[12]=z*e+x*c+A*l+m*w,r[13]=z*v+x*h+A*M+m*F,r[14]=z*i+x*y+A*p+m*Y,r[15]=z*s+x*f+A*g+m*N,r}function D(r,n,a){var e=a[0],v=a[1],i=a[2],s,c,h,y,f,l,M,p,g,w,F,Y;return n===r?(r[12]=n[0]*e+n[4]*v+n[8]*i+n[12],r[13]=n[1]*e+n[5]*v+n[9]*i+n[13],r[14]=n[2]*e+n[6]*v+n[10]*i+n[14],r[15]=n[3]*e+n[7]*v+n[11]*i+n[15]):(s=n[0],c=n[1],h=n[2],y=n[3],f=n[4],l=n[5],M=n[6],p=n[7],g=n[8],w=n[9],F=n[10],Y=n[11],r[0]=s,r[1]=c,r[2]=h,r[3]=y,r[4]=f,r[5]=l,r[6]=M,r[7]=p,r[8]=g,r[9]=w,r[10]=F,r[11]=Y,r[12]=s*e+f*v+g*i+n[12],r[13]=c*e+l*v+w*i+n[13],r[14]=h*e+M*v+F*i+n[14],r[15]=y*e+p*v+Y*i+n[15]),r}function G(r,n,a,e){var v=e[0],i=e[1],s=e[2],c=Math.hypot(v,i,s),h,y,f,l,M,p,g,w,F,Y,N,z,x,A,m,O,q,E,I,P,R,$,j,k;return c<S?null:(c=1/c,v*=c,i*=c,s*=c,h=Math.sin(a),y=Math.cos(a),f=1-y,l=n[0],M=n[1],p=n[2],g=n[3],w=n[4],F=n[5],Y=n[6],N=n[7],z=n[8],x=n[9],A=n[10],m=n[11],O=v*v*f+y,q=i*v*f+s*h,E=s*v*f-i*h,I=v*i*f-s*h,P=i*i*f+y,R=s*i*f+v*h,$=v*s*f+i*h,j=i*s*f-v*h,k=s*s*f+y,r[0]=l*O+w*q+z*E,r[1]=M*O+F*q+x*E,r[2]=p*O+Y*q+A*E,r[3]=g*O+N*q+m*E,r[4]=l*I+w*P+z*R,r[5]=M*I+F*P+x*R,r[6]=p*I+Y*P+A*R,r[7]=g*I+N*P+m*R,r[8]=l*$+w*j+z*k,r[9]=M*$+F*j+x*k,r[10]=p*$+Y*j+A*k,r[11]=g*$+N*j+m*k,n!==r&&(r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r)}function H(r,n,a){var e=Math.sin(a),v=Math.cos(a),i=n[4],s=n[5],c=n[6],h=n[7],y=n[8],f=n[9],l=n[10],M=n[11];return n!==r&&(r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r[4]=i*v+y*e,r[5]=s*v+f*e,r[6]=c*v+l*e,r[7]=h*v+M*e,r[8]=y*v-i*e,r[9]=f*v-s*e,r[10]=l*v-c*e,r[11]=M*v-h*e,r}function J(r,n,a){var e=Math.sin(a),v=Math.cos(a),i=n[0],s=n[1],c=n[2],h=n[3],y=n[8],f=n[9],l=n[10],M=n[11];return n!==r&&(r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r[0]=i*v-y*e,r[1]=s*v-f*e,r[2]=c*v-l*e,r[3]=h*v-M*e,r[8]=i*e+y*v,r[9]=s*e+f*v,r[10]=c*e+l*v,r[11]=h*e+M*v,r}function K(r,n,a){var e=Math.sin(a),v=Math.cos(a),i=n[0],s=n[1],c=n[2],h=n[3],y=n[4],f=n[5],l=n[6],M=n[7];return n!==r&&(r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r[0]=i*v+y*e,r[1]=s*v+f*e,r[2]=c*v+l*e,r[3]=h*v+M*e,r[4]=y*v-i*e,r[5]=f*v-s*e,r[6]=l*v-c*e,r[7]=M*v-h*e,r}function V(r,n,a,e,v){var i=1/Math.tan(n/2),s;return r[0]=i/a,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=i,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,v!=null&&v!==1/0?(s=1/(e-v),r[10]=(v+e)*s,r[14]=2*v*e*s):(r[10]=-1,r[14]=-2*e),r}var Q=V;function X(r,n,a,e,v,i,s){var c=1/(n-a),h=1/(e-v),y=1/(i-s);return r[0]=-2*c,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*h,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*y,r[11]=0,r[12]=(n+a)*c,r[13]=(v+e)*h,r[14]=(s+i)*y,r[15]=1,r}var U=X;function W(r,n,a,e){var v,i,s,c,h,y,f,l,M,p,g=n[0],w=n[1],F=n[2],Y=e[0],N=e[1],z=e[2],x=a[0],A=a[1],m=a[2];return Math.abs(g-x)<S&&Math.abs(w-A)<S&&Math.abs(F-m)<S?T(r):(f=g-x,l=w-A,M=F-m,p=1/Math.hypot(f,l,M),f*=p,l*=p,M*=p,v=N*M-z*l,i=z*f-Y*M,s=Y*l-N*f,p=Math.hypot(v,i,s),p?(p=1/p,v*=p,i*=p,s*=p):(v=0,i=0,s=0),c=l*s-M*i,h=M*v-f*s,y=f*i-l*v,p=Math.hypot(c,h,y),p?(p=1/p,c*=p,h*=p,y*=p):(c=0,h=0,y=0),r[0]=v,r[1]=c,r[2]=f,r[3]=0,r[4]=i,r[5]=h,r[6]=l,r[7]=0,r[8]=s,r[9]=y,r[10]=M,r[11]=0,r[12]=-(v*g+i*w+s*F),r[13]=-(c*g+h*w+y*F),r[14]=-(f*g+l*w+M*F),r[15]=1,r)}function Z(){var r=new L(3);return L!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function d(r,n,a){var e=new L(3);return e[0]=r,e[1]=n,e[2]=a,e}function b(r,n,a){return r[0]=n[0]+a[0],r[1]=n[1]+a[1],r[2]=n[2]+a[2],r}function t(r,n,a){return r[0]=n[0]-a[0],r[1]=n[1]-a[1],r[2]=n[2]-a[2],r}function u(r,n){var a=n[0],e=n[1],v=n[2],i=a*a+e*e+v*v;return i>0&&(i=1/Math.sqrt(i)),r[0]=n[0]*i,r[1]=n[1]*i,r[2]=n[2]*i,r}function o(r,n,a){var e=n[0],v=n[1],i=n[2],s=a[0],c=a[1],h=a[2];return r[0]=v*h-i*c,r[1]=i*s-e*h,r[2]=e*c-v*s,r}function r1(r,n,a,e){var v=[],i=[];return v[0]=n[0]-a[0],v[1]=n[1]-a[1],v[2]=n[2]-a[2],i[0]=v[2]*Math.sin(e)+v[0]*Math.cos(e),i[1]=v[1],i[2]=v[2]*Math.cos(e)-v[0]*Math.sin(e),r[0]=i[0]+a[0],r[1]=i[1]+a[1],r[2]=i[2]+a[2],r}(function(){var r=Z();return function(n,a,e,v,i,s){var c,h;for(a||(a=3),e||(e=0),v?h=Math.min(v*a+e,n.length):h=n.length,c=e;c<h;c+=a)r[0]=n[c],r[1]=n[c+1],r[2]=n[c+2],i(r,r,s),n[c]=r[0],n[c+1]=r[1],n[c+2]=r[2];return n}})();export{Z as a,o as b,_ as c,b as d,r1 as e,d as f,H as g,J as h,K as i,B as j,W as l,C as m,u as n,U as o,Q as p,G as r,t as s,D as t};
